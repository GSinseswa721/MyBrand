<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blogs</title>
    <link rel="stylesheet" href="../styles/dashboard.css">
    <link rel="stylesheet" href="../styles/styles.css">
</head>
<body>
   <div class="sidebar">
        <div class="dashboard-text"><img src="../imgs/logo.svg" alt="" class="logo-dashboard"><br class="dashboard-text-style"> Dashboard</div>
        <div class="icons-middle-dashboard">
           <a href="/dashboard/home.html"><img src="../imgs/homeicon.svg" alt="" class="icons-image-dashboard"></a>
           <a href="/dashboard/blogs.html"><img src="../imgs/blog.svg" alt="" class="icons-image-dashboard"></a>
            <a href="/dashboard/message.html"><img src="../imgs/message-icon.svg" alt="" class="icons-image-dashboard"></a>
        </div>
        <div class="icon-bottom-dashboard"><a href="/index.html"><img src="../imgs/solar_logout-3-bold-duotone.svg" alt="" class="icons-image-dashboard"></a></div>
   </div>
   <div class="nav-bar-dashboard">
        <div class="welcome-dashboard">Blogs </div>
        <div class="notifaction-dashboard"><img src="../imgs/notification.svg" alt="" class="notification-icon"></div>
   </div> 
   <div>
   <div class="create-a-blog"><img src="/imgs/create-dashboard.svg" alt="" class="create-dash"><a href="/integration/addblog.html">Create A blog</a></div>
   <div class="project-section">
    <div id="all-blog">
     
     <!-- <div class="blog-card">
     <img src="../imgs/articleone 1.png" alt="" class="countrytwo">
     <div class="project-container-blogs">
     <div class="project-section-description-blog-two">
       <pre class="description-text-blog">
        <span class="heading-blog">
          10 Essential Tools for Web developers
         </span>
          <span class="heading-blog-second">
          This article can explore various tools, frameworks,
          and software that web developers can use to enhance
          their productivity and streamline their workflow</span>
       </pre>
       
       <div class="icon-blogs">
        <img src="../imgs/delete.svg" alt="" class="blog-dash-icons">
        <img src="../imgs/update.svg" alt="" class="blog-dash-icons">
       </div>
      </div>
    </div>
    </div> -->
     
     <!-- <div>
     
       <img src="../imgs/articletwo.png" alt="" class="calculator">
      </div>
     <div class="project-section-description-two-blog">
      <pre class="description-text-blog">
        <span class="heading-blog">
          10 Essential Tools for Web developers
         </span>
          <span class="heading-blog-second">
          This article can explore various tools, frameworks,
          and software that web developers can use to enhance
          their productivity and streamline their workflow</span>
       </pre>

       <div class="icon-blogs">
        <img src="../imgs/delete.svg" alt="" class="blog-dash-icons">
        <img src="../imgs/update.svg" alt="" class="blog-dash-icons">
       </div>
     </div> -->
   </div>
  </div>
 
<script>

const allBlog = document.querySelector('.project-section');

const getAll = async () => {
  try {
    const response = await fetch('https://brand-backend-zqib.onrender.com/blog');
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    const data = await response.json();
    console.log(data);
    const blogs = data.data;

    // Use map to generate an array of HTML strings for each blog
    const blogCards = blogs.map(blog => `
      <div class="blog">
        <img src="${blog.image}" alt="" class="country">
        <div class="">
          <div class="">
            <pre class="">
              <span class="heading-blog">${blog.title}</span>
              <span class="heading">${blog.content}</span>
            </pre>
            <div class="icon-blogs">
              <img src="../imgs/delete.svg" alt="" class="blog-dash-icons">
              <img src="../imgs/update.svg" alt="" class="blog-dash-icons">
            </div>
          </div>
        </div>
      </div>
    `);

    // Join all blog cards HTML strings and insert into the DOM
    allBlog.innerHTML = blogCards.join('');
  } catch (error) {
    console.error('Error fetching data:', error);
  }
};

// Call the getAll function to fetch and render all blogs
getAll();






</script>
<!-- <script>
  document.addEventListener("DOMContentLoaded", async() =>{
    const blogs = document.getElementById("all-blog");

    try {
      response=await fetch(`https://brand-backend-zqib.onrender.com/blog/`, {
        method:"GET",
      });
      if (!response.ok){
        console.log(response)
      }
      const blogData = await response.json();
        
        console.log(blogData)
      blogData.data.forEach((blog)=>{

      const blogContainer= document.createElement("div");
      blogContainer.innerHTML=` 
      
      <div id="all-blog">

       ${blog.image}
     </div>
     <div class="project-container-blogs">
     <div class="project-section-description-blog-two">
       <pre class="description-text-blog">
        <span class="heading-blog">
          ${blog.title}
         </span>
          <span class="heading-blog-second">
          ${blog.content}
            </span>
       </pre>
       
     </div>
     <div class="options">
     <button id="delete" style="background-color:blue;color:white;padding:6px;margin-left:55px;" onclick="navigateToEdit('${blog._id}')">Update</button>
     <button id="delete" style="background-color:red;color:white;padding:6px;margin-left:25px;" onclick="deleteBlog('${blog._id}')">Delete</button>
     </div>
       `
blogs.appendChild(blogContainer);


      })

    } catch(error){
      console.log(error)
    }

  } )

  //delete blog

  
const deleteBlog = async(id)=>{
  
  try{
    const token = localStorage.getItem('token');
    if(!token){
      console.log("no token found");
    }
      const response = await fetch(`https://brand-backend-zqib.onrender.com/blog/${id}`, {
        method: 'DELETE',
        headers: {'Content-Types': "application/json"}
      })

    if(!response.ok)  {
      return ("failed to delete")
    }
    location.reload();


  }catch(error){
    console.log(error);
  }
}

//function to edit

const navigateToEdit = (id)=>{
  window.location.href = `editblog.html?id=${id}`;
  
}
</script>*/ -->
</body>
</html>